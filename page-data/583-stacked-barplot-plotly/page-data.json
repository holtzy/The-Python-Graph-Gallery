{"componentChunkName":"component---src-pages-jupyter-notebook-slug-js","path":"/583-stacked-barplot-plotly/","result":{"data":{"jupyterNotebook":{"html":"<div class=\"notebook-render\"><div class=\"sc-fLDLck copmGR\"><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-jBIHhB bMhvsO markdown\"><h2>Dataset</h2>\n<p>For a barplot, we need a dataset with 3 columns: one for the <strong>main categories</strong>, one for the <strong>sub categories</strong> and one for the <strong>values</strong>.</p>\n<p>Let&#x27;s create it using <code>pandas</code>:</p></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-gNZgCX iTRzZd input-container\"><pre class=\"sc-jbAkgO hVUwg input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">import</span><span> pandas </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> pd\n</span><span>data </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&#x27;category&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;A&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;A&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;B&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;B&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;C&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;C&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;D&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;D&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;E&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;E&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&#x27;sub_category&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;X&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;Y&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;X&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;Y&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;X&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;Y&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;X&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;Y&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;X&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;Y&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&#x27;value&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#36acaa\">17</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">10</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">42</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">22</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">33</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">11</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">55</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">25</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">25</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">15</span><span class=\"token\" style=\"color:#393A34\">]</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">}</span><span>\n</span>\n<span>df </span><span class=\"token\" style=\"color:#393A34\">=</span><span> pd</span><span class=\"token\" style=\"color:#393A34\">.</span><span>DataFrame</span><span class=\"token\" style=\"color:#393A34\">(</span><span>data</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>df</span><span class=\"token\" style=\"color:#393A34\">.</span><span>head</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kfeOyU hdFmYB nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>category</th>\n      <th>sub_category</th>\n      <th>value</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>X</td>\n      <td>17</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>A</td>\n      <td>Y</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>B</td>\n      <td>X</td>\n      <td>42</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>B</td>\n      <td>Y</td>\n      <td>22</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>C</td>\n      <td>X</td>\n      <td>33</td>\n    </tr>\n  </tbody>\n</table>\n</div></div></div></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-jBIHhB bMhvsO markdown\"><h2>Stacked Barplot with plotly express</h2>\n<p>The chart is made using using the <code>bar()</code> function from the <code>plotly.express</code> module.</p>\n<p>We just have to pass the <code>df</code> object, and specify <strong>which column</strong> we want to plot. In this case it&#x27;s the <code>category</code> and the <code>value</code> (defined above).</p>\n<p>Then we just need to specify the <code>color</code> argument with the <code>sub_category</code> column so that <strong>colors map</strong> this column.</p></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-gNZgCX iTRzZd input-container\"><pre class=\"sc-jbAkgO hVUwg input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">import</span><span> plotly</span><span class=\"token\" style=\"color:#393A34\">.</span><span>express </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> px\n</span><span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> px</span><span class=\"token\" style=\"color:#393A34\">.</span><span>bar</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>   df</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>   x</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;category&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>   y</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;value&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>   color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;sub_category&#x27;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>show</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kfeOyU hdFmYB nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-jBIHhB bMhvsO markdown\"><p>Now we save it as an html element in order to render it</p></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-gNZgCX iTRzZd input-container\"><pre class=\"sc-jbAkgO hVUwg input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save widget to html</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/583-stacked-barplot-plotly-1.html&quot;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-gNZgCX iTRzZd input-container\"><pre class=\"sc-jbAkgO hVUwg input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span>\n<span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe\n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/583-stacked-barplot-plotly-1.html&quot;</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;790&quot;</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;700&quot;</span><span>\n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;Stacked Barplot with plotly express&quot;</span><span>\n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span></code></pre></div><div class=\"sc-kfeOyU hdFmYB nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div>\n<iframe\n    src=\"../../interactiveCharts/583-stacked-barplot-plotly-1.html\"\n    width=\"790\"\n    height=\"700\"\n    title=\"Stacked Barplot with plotly express\"\n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-jBIHhB bMhvsO markdown\"><h2>Barplot with plotly graph object</h2>\n<p>The plotly graph object API requires a bit more verbose, but nothing very complex here!</p>\n<p>We mainly have to <strong>iterate</strong> over each sub categories, filter the dataframe on this sub category, and plot it.</p>\n<p>Last but not least, we use the <code>update_layout()</code> function with the <code>barmode=&#x27;stack&#x27;</code> argument to ensure that bars are <strong>stacked on each others</strong>. Otherwise the default render will put them next to each other (the <strong>default</strong> value is <code>group</code>)</p></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-gNZgCX iTRzZd input-container\"><pre class=\"sc-jbAkgO hVUwg input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">import</span><span> plotly</span><span class=\"token\" style=\"color:#393A34\">.</span><span>graph_objects </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> go\n</span>\n<span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Figure</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Create list of all unique sub categories</span><span>\n</span><span>sub_categories </span><span class=\"token\" style=\"color:#393A34\">=</span><span> df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;sub_category&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>unique</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Adding bars for each sub-category</span><span>\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">for</span><span> sub_cat </span><span class=\"token\" style=\"color:#0000ff\">in</span><span> sub_categories</span><span class=\"token\" style=\"color:#393A34\">:</span><span>\n</span><span>    filtered_df </span><span class=\"token\" style=\"color:#393A34\">=</span><span> df</span><span class=\"token\" style=\"color:#393A34\">[</span><span>df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;sub_category&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span> </span><span class=\"token\" style=\"color:#393A34\">==</span><span> sub_cat</span><span class=\"token\" style=\"color:#393A34\">]</span><span>\n</span><span>    fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>add_trace</span><span class=\"token\" style=\"color:#393A34\">(</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Bar</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>        x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>filtered_df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;category&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>        y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>filtered_df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;value&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>        name</span><span class=\"token\" style=\"color:#393A34\">=</span><span>sub_cat\n</span><span>    </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Update layout if necessary</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    barmode</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;stack&#x27;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Show plot</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>show</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kfeOyU hdFmYB nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-jBIHhB bMhvsO markdown\"><p>Now we save it as an html element in order to render it</p></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-gNZgCX iTRzZd input-container\"><pre class=\"sc-jbAkgO hVUwg input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save widget to html</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/583-stacked-barplot-plotly-2.html&quot;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-gNZgCX iTRzZd input-container\"><pre class=\"sc-jbAkgO hVUwg input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span>\n<span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe\n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/583-stacked-barplot-plotly-2.html&quot;</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;790&quot;</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;790&quot;</span><span>\n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;Stacked Barplot with plotly graph object&quot;</span><span>\n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span></code></pre></div><div class=\"sc-kfeOyU hdFmYB nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div>\n<iframe\n    src=\"../../interactiveCharts/583-stacked-barplot-plotly-2.html\"\n    width=\"790\"\n    height=\"790\"\n    title=\"Stacked Barplot with plotly graph object\"\n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-dVBluf geXnbO cell\" style=\"box-shadow:none\"><div class=\"sc-jBIHhB bMhvsO markdown\"><h2>Going further</h2>\n<p>You might be interested in:</p>\n<ul>\n<li>creating an <a href=\"/571-radar-chart-with-plotly\">interactive radar chart</a></li>\n</ul></div></div></div></div>","metadata":{"title":"Interactive stacked barplot with plotly","description":"This post shows how to plot a <b>stacked barplot</b> using the <a href='/plotly'>plotly</a> library in python. In the previous post, we saw how to create a simple <a href='/582-simple-barplot-plotly'>interactive barplot</a>.<br><br>In this post, we will learn how to represent barplot with <b>both categories and sub categories</b>. The first example uses the <code>plotly.express</code> module and the second example uses the <code>plotly.graph_objects</code> module.","seoDescription":"How to plot an interactive stacked barplot in python with plotly","family":"ranking","chartType":"barplot","keywords":"python, chart, plot, barplot, plotly, interactive, bar, express, graph object","slug":"583-stacked-barplot-plotly"}}},"pageContext":{"id":"4b5c08d0-d87b-5cb8-a70f-42ebd2613caf >>> JupyterNotebook","slug":"583-stacked-barplot-plotly","__params":{"slug":"583-stacked-barplot-plotly"}}},"staticQueryHashes":["2944911273"],"slicesMap":{}}