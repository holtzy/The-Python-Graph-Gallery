{"componentChunkName":"component---src-pages-jupyter-notebook-slug-js","path":"/555-candle-stick-with-moving-average-plotly/","result":{"data":{"jupyterNotebook":{"html":"<div class=\"notebook-render\"><div class=\"sc-fqkvVR cbsNYc\"><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Libraries</h2>\n<p>First, we need to install the <strong>plotly</strong>:</p>\n<p><code>pip install plotly</code></p>\n<p>And since we&#x27;ll load <strong>data from yahoo finance</strong>, we need the <code>yfinance</code> library:</p>\n<p><code>pip install yfinance</code></p>\n<p>We&#x27;ll also need the <code>pandas</code> module to calculate the moving average.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#0000ff\">import</span><span> plotly</span><span class=\"token\" style=\"color:#393A34\">.</span><span>graph_objects </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> go\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">import</span><span> yfinance </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> yf\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">import</span><span> pandas </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> pd</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Dataset</h2>\n<p><a href=\"https://python-graph-gallery.com/candlestick/\">Candlestick charts</a> are mainly used to represent <strong>financial data</strong>, especially stock prices.</p>\n<p>In this post, we&#x27;ll load Apple&#x27;s share price data, directly from our <strong>Python</strong> code via the <code>yfinance</code> library. All we need to do is define the desired <strong>start</strong> and <strong>end</strong> data (<code>yyyy-mm-dd</code> format), and the <strong>ticker</strong> or symbol associated with this company (in this case <code>&quot;AAPL&quot;</code>).</p>\n<p>Our dataset must have the <strong>characteristics</strong> needed to produce our graph easily:</p>\n<ul>\n<li>be a pandas dataframe</li>\n<li>a date index</li>\n<li>an Open column</li>\n<li>a High column</li>\n<li>a Low column</li>\n<li>a Close column</li>\n</ul>\n<p>The <strong>tickers</strong> can be found on easily on <a href=\"https://finance.yahoo.com\">yahoo finance</a>.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Define the stock symbol and date range</span><span>\n</span><span>stock_symbol </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#A31515\">&quot;^FCHI&quot;</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Example: CAC40 (largest French companies)</span><span>\n</span><span>start_date </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#A31515\">&quot;2020-01-01&quot;</span><span>\n</span><span>end_date </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#A31515\">&quot;2020-03-30&quot;</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Load historical data</span><span>\n</span><span>stock_data </span><span class=\"token\" style=\"color:#393A34\">=</span><span> yf</span><span class=\"token\" style=\"color:#393A34\">.</span><span>download</span><span class=\"token\" style=\"color:#393A34\">(</span><span>stock_symbol</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                         start</span><span class=\"token\" style=\"color:#393A34\">=</span><span>start_date</span><span class=\"token\" style=\"color:#393A34\">,</span><span> end</span><span class=\"token\" style=\"color:#393A34\">=</span><span>end_date</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><code class=\"nteract-display-area-stdout\"><span>[*********************100%%**********************]  1 of 1 completed\n</span></code></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>Once we have our dataset, we just need to <strong>calculate the moving averages</strong>. Thanks to the <code>rolling()</code> function from <a href=\"https://python-graph-gallery.com/pandas/\">pandas</a>, it&#x27;s actually pretty easy:</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Moving average over a window of 3 and 8</span><span>\n</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving3&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Close&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>rolling</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">3</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span><span>mean</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving8&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Close&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>rolling</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">8</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">.</span><span>mean</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Candlestick with one moving average</h2>\n<p>Once we&#x27;ve opened our dataset, we&#x27;ll now <strong>create the graph</strong>. We have to <strong>specify which column to use</strong> for opening, closing etc. </p>\n<p>To add the moving average, all we need to do is add an <code>Scatter</code> to the <code>data</code> argument, and specify the values on the <strong>x-axis</strong> (in this case, time) and those on the <strong>y-axis</strong> (the moving average calculated previously). </p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Figure</span><span class=\"token\" style=\"color:#393A34\">(</span><span>data</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">[</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Candlestick</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span>                \n<span>                x </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># date values</span><span>\n</span><span>                </span><span class=\"token builtin\">open</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Open&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                high </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;High&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                low </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Low&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                close </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Close&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span>                      \n<span>                      </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Add the moving average</span><span>\n</span><span>                      go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving3&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                 y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving3&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>                     </span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Mask a default range slider</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>xaxis_rangeslider_visible</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set layout size</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    autosize</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">700</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">500</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    showlegend</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>Now, let&#x27;s save the graph in a HTML file and display it in this website using an <code>iframe</code></p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save this file as a standalong html file:</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/candlestick-plotly-moving-average.html&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe \n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/candlestick-plotly-moving-average.html&quot;</span><span> \n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;800&quot;</span><span> \n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;600&quot;</span><span> \n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;candlestick with moving average&quot;</span><span> \n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><iframe \n    src=\"../../interactiveCharts/candlestick-plotly-moving-average.html\" \n    width=\"800\" \n    height=\"600\" \n    title=\"candlestick with moving average\" \n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Multiple moving averages</h2>\n<p>You can easily add <strong>as many moving averages as you want</strong> by adding arguments when creating the figure. In our case, we&#x27;ll add the <strong>8-day</strong> moving average. </p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Figure</span><span class=\"token\" style=\"color:#393A34\">(</span><span>data</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">[</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Candlestick</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span>                \n<span>                x </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># date values</span><span>\n</span><span>                </span><span class=\"token builtin\">open</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Open&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                high </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;High&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                low </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Low&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                close </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Close&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span>                      \n<span>                      </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Add the moving average</span><span>\n</span><span>                      go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving3&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                 y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving3&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                      go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving8&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                 y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving8&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>                     </span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Mask a default range slider</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>xaxis_rangeslider_visible</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set layout size</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    autosize</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">700</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">500</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    showlegend</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>Now, let&#x27;s save the graph in a HTML file and display it in this website using an <code>iframe</code></p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save this file as a standalong html file:</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/candlestick-plotly-moving-average-2.html&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe \n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/candlestick-plotly-moving-average-2.html&quot;</span><span> \n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;800&quot;</span><span> \n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;600&quot;</span><span> \n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;candlestick with moving average 2&quot;</span><span> \n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><iframe \n    src=\"../../interactiveCharts/candlestick-plotly-moving-average-2.html\" \n    width=\"800\" \n    height=\"600\" \n    title=\"candlestick with moving average 2\" \n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Custom style of the moving averages</h2>\n<p>To make our graph <strong>easier to read</strong> and <strong>more informative</strong>, we can change the <code>colors</code> of the bars and moving averages.</p>\n<ul>\n<li><strong>change color</strong>: add a <code>line</code> argument (dictionnary) with the properties wanted (color, width and shape)</li>\n<li><strong>add legend</strong>: add a <code>name</code> argument with the text we want</li>\n</ul></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Figure</span><span class=\"token\" style=\"color:#393A34\">(</span><span>data</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#393A34\">[</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Candlestick</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span>                \n<span>                x </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># date values</span><span>\n</span><span>                </span><span class=\"token builtin\">open</span><span> </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Open&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                high </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;High&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                low </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Low&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                close </span><span class=\"token\" style=\"color:#393A34\">=</span><span> stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Close&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span>                \n<span>                </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># color or bars</span><span>\n</span><span>                increasing_line_color </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;limegreen&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                decreasing_line_color </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;orangered&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                showlegend</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span> \n</span>                      \n<span>                      </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Add the moving average</span><span>\n</span><span>                      go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving3&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                 y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving3&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                 line</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;gray&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                           width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                           shape</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;spline&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># smooth the line</span><span>\n</span><span>                                 name</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;MA3&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span>                      \n<span>                      go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving8&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">.</span><span>index</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                 y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>stock_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;moving8&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                 line</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;black&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                           width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                                           shape</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;spline&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># smooth the line</span><span>\n</span><span>                                 name</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;MA8&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>                     </span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Mask a default range slider</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>xaxis_rangeslider_visible</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set layout size</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    autosize</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">600</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">500</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    legend</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>        x</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">0.82</span><span class=\"token\" style=\"color:#393A34\">,</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Adjust the legend&#x27;s x position</span><span>\n</span><span>        y</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">0.98</span><span class=\"token\" style=\"color:#393A34\">,</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Adjust the legend&#x27;s y position</span><span>\n</span><span>        font</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>size</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">12</span><span class=\"token\" style=\"color:#393A34\">)</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Customize font size</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>Now, let&#x27;s save the graph in a HTML file and display it in this website using an <code>iframe</code></p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save this file as a standalong html file:</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/candlestick-plotly-moving-average-3.html&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe \n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/candlestick-plotly-moving-average-3.html&quot;</span><span> \n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;800&quot;</span><span> \n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;600&quot;</span><span> \n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;candlestick with moving average 3&quot;</span><span> \n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><iframe \n    src=\"../../interactiveCharts/candlestick-plotly-moving-average-3.html\" \n    width=\"800\" \n    height=\"600\" \n    title=\"candlestick with moving average 3\" \n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Going further</h2>\n<p>This post explains how to create a candlestick chart with <a href=\"https://python-graph-gallery.com/plotly/\">plotly</a>.</p>\n<p>For more examples of <strong>how to create or customize</strong> your candlestick plots, see the <a href=\"https://python-graph-gallery.com/candlestick/\">candlestick section</a>. You may also be interested in how to <a href=\"https://python-graph-gallery.com/554-custom-candle-stick-plotly/\">custom style of a plotly candlestick chart</a>.</p></div></div></div></div>","metadata":{"title":"Candlestick chart with moving averages","description":"<a href='https://python-graph-gallery.com/candlestick/'>A candlestick chart</a>, created using the <a href='https://python-graph-gallery.com/plotly/'>Plotly</a> library in Python, is a graphical representation of <b>financial data</b>. It displays price movements over a specific time period, typically used in stock market analysis. Candlestick charts are composed of individual <i>'candlesticks'</i>, each representing the <b>opening, closing, high, and low</b> prices for a given time interval. These candlesticks are displayed on a two-dimensional coordinate system, with one axis representing time and the other axis representing price. <br><br>  <code>Plotly</code> has a <code>Candlestick()</code> function that provides the capability to create candlestick charts easily. In this post, we'll see how to add moving averages in <a href='https://python-graph-gallery.com/candlestick/'> candlestick charts</a> with this library. You might first want to take a look at <a href='https://python-graph-gallery.com/553-intro-candle-stick-plotly/'>how to customize a candlestick chart</a> (color, layout...) with plotly.","seoDescription":"How to create a candlestick chart with moving averages with plotly","family":"evolution","chartType":"candlestick","keywords":"candlestick, plotly, moving, rolling, average, chart, finance","slug":"555-candle-stick-with-moving-average-plotly"}}},"pageContext":{"id":"47b68081-9ba4-5381-b5bb-208b5781e4e9 >>> JupyterNotebook","slug":"555-candle-stick-with-moving-average-plotly","__params":{"slug":"555-candle-stick-with-moving-average-plotly"}}},"staticQueryHashes":["2944911273"],"slicesMap":{}}