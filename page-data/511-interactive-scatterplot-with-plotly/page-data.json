{"componentChunkName":"component---src-pages-jupyter-notebook-slug-js","path":"/511-interactive-scatterplot-with-plotly/","result":{"data":{"jupyterNotebook":{"html":"<div class=\"notebook-render\"><div class=\"sc-fqkvVR cbsNYc\"><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>What is a scatter plot?</h2>\n<p>A <a href=\"https://python-graph-gallery.com/scatter-plot/\">scatter plot</a> is a simple yet powerful way to visually represent <strong>data relationships</strong> by displaying points on a graph.</p>\n<p>Imagine a coordinate system, where the horizontal <code>(x) axis</code> represents one variable, and the <code>vertical (y)</code> axis represents another. Each data point corresponds to a specific observation and is represented by its coordinates on the graph. By looking at the distribution of points, we can easily <strong>identify patterns or trends</strong>, such as correlations, clusters, or outliers.</p>\n<p>Essentially, a <a href=\"https://python-graph-gallery.com/scatter-plot/\">scatter plot</a> allows us to see <strong>how two variables might be related</strong> or influenced by each other, making it a valuable tool for understanding data and drawing insights in a visual and intuitive manner.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Libraries</h2>\n<p><a href=\"https://python-graph-gallery.com/plotly/\">Plotly</a> is a library designed for <strong>interactive visualization</strong> with python. </p>\n<p>If you want to use plotly, you can either use the <code>plotly.express</code> module (<code>px</code>) or the <code>plotly.graph_objects</code> module (<code>go</code>). The main difference between these modules is the <em>&quot;level&quot;</em>: the <code>px</code> module is easier to use (<em>high level</em>), but if you want to do something <strong>very specific and need flexibility</strong>, I recommend you use the <code>go</code> module (<em>lower level</em>).</p>\n<p>Don&#x27;t forget to install <a href=\"https://python-graph-gallery.com/plotly/\">plotly</a> with the <code>pip install plotly</code> command.</p>\n<p>In our case, we&#x27;ll use the <code>go</code> module (or <code>graph_objects</code>). We will also use <code>numpy</code> and <code>pandas</code> to <strong>generate data</strong> and put it into a dataframe.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Libraries</span><span>\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">import</span><span> plotly</span><span class=\"token\" style=\"color:#393A34\">.</span><span>graph_objects </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> go\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">import</span><span> pandas </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> pd\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">import</span><span> numpy </span><span class=\"token\" style=\"color:#0000ff\">as</span><span> np</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Dataset</h2>\n<p>Since scatterplots are intended to represent 2 continuous variables, let&#x27;s generate a sample of 200 randomly distributed observations using numpy and its functions <code>random.normal()</code> and <code>random.uniform()</code>.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Generate a sample of 100 observations</span><span>\n</span><span>sample_size </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#36acaa\">200</span><span>\n</span><span>x </span><span class=\"token\" style=\"color:#393A34\">=</span><span> np</span><span class=\"token\" style=\"color:#393A34\">.</span><span>random</span><span class=\"token\" style=\"color:#393A34\">.</span><span>uniform</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">30</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">20</span><span class=\"token\" style=\"color:#393A34\">,</span><span> sample_size</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>y </span><span class=\"token\" style=\"color:#393A34\">=</span><span> x </span><span class=\"token\" style=\"color:#393A34\">*</span><span> </span><span class=\"token\" style=\"color:#36acaa\">10</span><span> </span><span class=\"token\" style=\"color:#393A34\">+</span><span> np</span><span class=\"token\" style=\"color:#393A34\">.</span><span>random</span><span class=\"token\" style=\"color:#393A34\">.</span><span>normal</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">10</span><span class=\"token\" style=\"color:#393A34\">,</span><span> sample_size</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Put the data into a pandas df</span><span>\n</span><span>df </span><span class=\"token\" style=\"color:#393A34\">=</span><span> pd</span><span class=\"token\" style=\"color:#393A34\">.</span><span>DataFrame</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">{</span><span class=\"token\" style=\"color:#A31515\">&#x27;x&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> x</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                   </span><span class=\"token\" style=\"color:#A31515\">&#x27;y&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> y</span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Basic scatter plot</h2>\n<p>The following code displays a simple scatter plot, with a title and an axis name, thanks to the <code>Scatter()</code> function.</p>\n<p>The <code>fig.add_trace(go.Scatter([...]</code> line tells the program to <strong>add a new trace</strong> (data series) to a figure (<code>fig</code>) that we initiated just before. In this case, the trace is a <a href=\"https://python-graph-gallery.com/scatter-plot/\">scatter plot</a>.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Create the figure (for the moment: a blank graph)</span><span>\n</span><span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Figure</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Add the scatter trace</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>add_trace</span><span class=\"token\" style=\"color:#393A34\">(</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span> \n</span><span>    x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;x&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Variable in the x-axis</span><span>\n</span><span>    y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;y&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Variable in the y-axis</span><span>\n</span><span>    mode</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;markers&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># This explicitly states that we want our observations to be represented by points</span><span>\n</span>    \n<span>    </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Properties associated with points </span><span>\n</span><span>    marker</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>        size</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">12</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Size</span><span>\n</span><span>        color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;#cb1dd1&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Color</span><span>\n</span><span>        opacity</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">0.8</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Point transparency </span><span>\n</span><span>        line</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">,</span><span> color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;black&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Properties of the edges</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Customize the layout</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;Interactive Scatter Plot&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Title</span><span>\n</span><span>    xaxis_title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;First Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># x-axis name</span><span>\n</span><span>    yaxis_title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;Second Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># y-axis name</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">800</span><span class=\"token\" style=\"color:#393A34\">,</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set the width of the figure to 800 pixels</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">600</span><span class=\"token\" style=\"color:#393A34\">,</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set the height of the figure to 600 pixels</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n</code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>Now, let&#x27;s save the graph in a HTML file and display it in this website using an <code>iframe</code></p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save this file as a standalong html file:</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/scatterplot-plotly-basic.html&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n</code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe \n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/scatterplot-plotly-basic.html&quot;</span><span> \n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;800&quot;</span><span> \n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;600&quot;</span><span> \n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;scatterplot with plotly&quot;</span><span> \n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span>\n</code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><iframe \n    src=\"../../interactiveCharts/scatterplot-plotly-basic.html\" \n    width=\"800\" \n    height=\"600\" \n    title=\"scatterplot with plotly\" \n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>That&#x27;s it, a first interactive scatterplot! ðŸ”¥ Try to hover markers, zoom on a specific area to understand the full potential of this chart.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Add a grouping variable</h2>\n<p>If you want to <strong>display a grouping variable</strong> on a <a href=\"https://python-graph-gallery.com/scatter-plot/\">scatter plot</a>, you can <em>change the color</em> of the points according to the labels of the categorical variable. </p>\n<p>To do this with <a href=\"https://python-graph-gallery.com/plotly/\">plotly</a>, we&#x27;ll need to define the colors we want for each label and then <strong>iterate over each label</strong> to add the associated points. </p>\n<p>We need to <strong>create and add a categorical variable</strong> to our initial data set. To do this, we use a <strong>comprehension list</strong> which will assign the value <code>&#x27;Group1&#x27;</code> to observations with a value less than 25 for the <code>first_variable</code>, <code>&#x27;Group2&#x27;</code> otherwise:</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Generate a sample of 100 observations</span><span>\n</span><span>sample_size </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#36acaa\">200</span><span>\n</span><span>first_variable </span><span class=\"token\" style=\"color:#393A34\">=</span><span> np</span><span class=\"token\" style=\"color:#393A34\">.</span><span>random</span><span class=\"token\" style=\"color:#393A34\">.</span><span>uniform</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">30</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">20</span><span class=\"token\" style=\"color:#393A34\">,</span><span> sample_size</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>second_variable </span><span class=\"token\" style=\"color:#393A34\">=</span><span> first_variable </span><span class=\"token\" style=\"color:#393A34\">*</span><span> </span><span class=\"token\" style=\"color:#36acaa\">10</span><span> </span><span class=\"token\" style=\"color:#393A34\">+</span><span> np</span><span class=\"token\" style=\"color:#393A34\">.</span><span>random</span><span class=\"token\" style=\"color:#393A34\">.</span><span>normal</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#36acaa\">0</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#36acaa\">10</span><span class=\"token\" style=\"color:#393A34\">,</span><span> sample_size</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>categorical_variable </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;Group1&#x27;</span><span> </span><span class=\"token\" style=\"color:#0000ff\">if</span><span> i </span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span> </span><span class=\"token\" style=\"color:#36acaa\">25</span><span> </span><span class=\"token\" style=\"color:#0000ff\">else</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;Group2&#x27;</span><span> </span><span class=\"token\" style=\"color:#0000ff\">for</span><span> i </span><span class=\"token\" style=\"color:#0000ff\">in</span><span> first_variable</span><span class=\"token\" style=\"color:#393A34\">]</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Put the data into a pandas df</span><span>\n</span><span>df </span><span class=\"token\" style=\"color:#393A34\">=</span><span> pd</span><span class=\"token\" style=\"color:#393A34\">.</span><span>DataFrame</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">{</span><span class=\"token\" style=\"color:#A31515\">&#x27;first_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> first_variable</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                   </span><span class=\"token\" style=\"color:#A31515\">&#x27;second_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> second_variable</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>                   </span><span class=\"token\" style=\"color:#A31515\">&#x27;categorical_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> categorical_variable</span><span class=\"token\" style=\"color:#393A34\">,</span><span class=\"token\" style=\"color:#393A34\">}</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>Now, let&#x27;s create a scatterplot using the <code>group</code> variable to color the markers:</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Create a dictionary to map categories to colors</span><span>\n</span><span>category_colors </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&#x27;Group1&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;orange&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&#x27;Group2&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;purple&#x27;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">}</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Create the scatter plot (for the moment: a blank graph)</span><span>\n</span><span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Figure</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Add the scatter trace with color based on the category_variable</span><span>\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">for</span><span> category</span><span class=\"token\" style=\"color:#393A34\">,</span><span> color </span><span class=\"token\" style=\"color:#0000ff\">in</span><span> category_colors</span><span class=\"token\" style=\"color:#393A34\">.</span><span>items</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span><span>\n</span><span>    category_data </span><span class=\"token\" style=\"color:#393A34\">=</span><span> df</span><span class=\"token\" style=\"color:#393A34\">[</span><span>df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;categorical_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span> </span><span class=\"token\" style=\"color:#393A34\">==</span><span> category</span><span class=\"token\" style=\"color:#393A34\">]</span><span>\n</span><span>    fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>add_trace</span><span class=\"token\" style=\"color:#393A34\">(</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>        x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>category_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;first_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Variable in the x-axis</span><span>\n</span><span>        y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>category_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;second_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Variable in the y-axis</span><span>\n</span><span>        mode</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;markers&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># This explicitly states that we want our observations to be represented by points</span><span>\n</span><span>        name</span><span class=\"token\" style=\"color:#393A34\">=</span><span>category</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span>        \n<span>        </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Properties associated with points </span><span>\n</span><span>        marker</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>            size</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">12</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>            color</span><span class=\"token\" style=\"color:#393A34\">=</span><span>color</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>            opacity</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">0.7</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>            line</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">2</span><span class=\"token\" style=\"color:#393A34\">,</span><span> color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;black&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Properties of the edges</span><span>\n</span><span>        </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Customize the layout and change the figure size</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;Interactive Scatter Plot with a Categorical Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Title</span><span>\n</span><span>    xaxis_title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;First Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># x-axis name</span><span>\n</span><span>    yaxis_title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;Second Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># y-axis name</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">800</span><span class=\"token\" style=\"color:#393A34\">,</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set the width of the figure to 800 pixels</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">600</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set the height of the figure to 600 pixels</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><p>Save in HTML and display:</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save this file as a standalong html file:</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/scatterplot-plotly-grouping.html&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n</code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe \n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/scatterplot-plotly-grouping.html&quot;</span><span> \n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;800&quot;</span><span> \n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;600&quot;</span><span> \n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;scatterplot with plotly&quot;</span><span> \n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><iframe \n    src=\"../../interactiveCharts/scatterplot-plotly-grouping.html\" \n    width=\"800\" \n    height=\"600\" \n    title=\"scatterplot with plotly\" \n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Add a trendline (linear or polynomial)</h2>\n<p>Adding a trendline to a <a href=\"https://python-graph-gallery.com/scatter-plot/\">scatter plot</a> serves the purpose of visually representing the <strong>overall trend or pattern</strong> in the data. It helps in understanding the general <strong>relationship</strong> between two variables and provides insights into how they might be related.</p>\n<p>For this purpose, we&#x27;ve created a function <code>fit_trendline()</code> to <strong>fit a relationship</strong> between 2 quantitative variables, for a <strong>given degree</strong>. A degree of 1 is equivalent to fit a <strong>linear</strong> relationship. </p>\n<p>Once the data has been fitted, simply <strong>add the line</strong> to the graph and define a few styling parameters.</p></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># Function to fit linear or polynomial trendline</span><span>\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">def</span><span> </span><span class=\"token\" style=\"color:#393A34\">fit_trendline</span><span class=\"token\" style=\"color:#393A34\">(</span><span>x</span><span class=\"token\" style=\"color:#393A34\">,</span><span> y</span><span class=\"token\" style=\"color:#393A34\">,</span><span> degree</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span><span>\n</span><span>    coeffs </span><span class=\"token\" style=\"color:#393A34\">=</span><span> np</span><span class=\"token\" style=\"color:#393A34\">.</span><span>polyfit</span><span class=\"token\" style=\"color:#393A34\">(</span><span>x</span><span class=\"token\" style=\"color:#393A34\">,</span><span> y</span><span class=\"token\" style=\"color:#393A34\">,</span><span> degree</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#0000ff\">return</span><span> np</span><span class=\"token\" style=\"color:#393A34\">.</span><span>polyval</span><span class=\"token\" style=\"color:#393A34\">(</span><span>coeffs</span><span class=\"token\" style=\"color:#393A34\">,</span><span> x</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Create a dictionary to map categories to colors</span><span>\n</span><span>category_colors </span><span class=\"token\" style=\"color:#393A34\">=</span><span> </span><span class=\"token\" style=\"color:#393A34\">{</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&#x27;Group1&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;orange&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#A31515\">&#x27;Group2&#x27;</span><span class=\"token\" style=\"color:#393A34\">:</span><span> </span><span class=\"token\" style=\"color:#A31515\">&#x27;purple&#x27;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">}</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Create the scatter plot (for the moment: a blank graph)</span><span>\n</span><span>fig </span><span class=\"token\" style=\"color:#393A34\">=</span><span> go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Figure</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Add the scatter trace with color based on the category_variable</span><span>\n</span><span></span><span class=\"token\" style=\"color:#0000ff\">for</span><span> category</span><span class=\"token\" style=\"color:#393A34\">,</span><span> color </span><span class=\"token\" style=\"color:#0000ff\">in</span><span> category_colors</span><span class=\"token\" style=\"color:#393A34\">.</span><span>items</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">:</span><span>\n</span><span>    category_data </span><span class=\"token\" style=\"color:#393A34\">=</span><span> df</span><span class=\"token\" style=\"color:#393A34\">[</span><span>df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;categorical_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span> </span><span class=\"token\" style=\"color:#393A34\">==</span><span> category</span><span class=\"token\" style=\"color:#393A34\">]</span><span>\n</span><span>    fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>add_trace</span><span class=\"token\" style=\"color:#393A34\">(</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>        x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>category_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;first_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Variable in the x-axis</span><span>\n</span><span>        y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>category_data</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;second_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Variable in the y-axis</span><span>\n</span><span>        mode</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;markers&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># This explicitly states that we want our observations to be represented by points</span><span>\n</span><span>        name</span><span class=\"token\" style=\"color:#393A34\">=</span><span>category</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span>        \n<span>        </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Properties associated with points </span><span>\n</span><span>        marker</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>            size</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">12</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>            color</span><span class=\"token\" style=\"color:#393A34\">=</span><span>color</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>            opacity</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">0.7</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>            line</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">2</span><span class=\"token\" style=\"color:#393A34\">,</span><span> color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;black&#x27;</span><span class=\"token\" style=\"color:#393A34\">)</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Properties of the edges</span><span>\n</span><span>        </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    </span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Fit the data with our function</span><span>\n</span><span>trendline_y </span><span class=\"token\" style=\"color:#393A34\">=</span><span> fit_trendline</span><span class=\"token\" style=\"color:#393A34\">(</span><span>df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;first_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;second_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span> degree</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">1</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>    \n<span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>add_trace</span><span class=\"token\" style=\"color:#393A34\">(</span><span>go</span><span class=\"token\" style=\"color:#393A34\">.</span><span>Scatter</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    x</span><span class=\"token\" style=\"color:#393A34\">=</span><span>df</span><span class=\"token\" style=\"color:#393A34\">[</span><span class=\"token\" style=\"color:#A31515\">&#x27;first_variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">]</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    y</span><span class=\"token\" style=\"color:#393A34\">=</span><span>trendline_y</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    mode</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;lines&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span>\n</span><span>    line</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token builtin\">dict</span><span class=\"token\" style=\"color:#393A34\">(</span><span>color</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;black&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> dash</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;solid&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">3</span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Dash the line to distinguish trendlines</span><span>\n</span><span>    showlegend</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">False</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Remove trendline from the legend</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n<span></span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Customize the layout and change the figure size</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>update_layout</span><span class=\"token\" style=\"color:#393A34\">(</span><span>\n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;Interactive Scatter Plot with a Categorical Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Title</span><span>\n</span><span>    xaxis_title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;First Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># x-axis name</span><span>\n</span><span>    yaxis_title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&#x27;Second Variable&#x27;</span><span class=\"token\" style=\"color:#393A34\">,</span><span> </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># y-axis name</span><span>\n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">800</span><span class=\"token\" style=\"color:#393A34\">,</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set the width of the figure to 800 pixels</span><span>\n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#36acaa\">600</span><span>  </span><span class=\"token\" style=\"color:#008000;font-style:italic\"># Set the height of the figure to 600 pixels</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">)</span><span>\n</span>\n</code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#008000;font-style:italic\"># save this file as a standalong html file:</span><span>\n</span><span>fig</span><span class=\"token\" style=\"color:#393A34\">.</span><span>write_html</span><span class=\"token\" style=\"color:#393A34\">(</span><span class=\"token\" style=\"color:#A31515\">&quot;../../static/interactiveCharts/scatterplot-plotly-trendline.html&quot;</span><span class=\"token\" style=\"color:#393A34\">)</span></code></pre></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-gsFSXq eSaGKB input-container\"><pre class=\"sc-iGgWBj gcBMNR input\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:10px 0px 10px 10px;margin:0px;overflow:auto;border:none;background-color:var(--cm-background, #fafafa)\"><code class=\"language-python\" style=\"color:#393A34;font-family:&quot;Consolas&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.9em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none\"><span class=\"token\" style=\"color:#393A34\">%</span><span class=\"token\" style=\"color:#393A34\">%</span><span>html\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span>iframe \n</span><span>    src</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;../../interactiveCharts/scatterplot-plotly-trendline.html&quot;</span><span> \n</span><span>    width</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;800&quot;</span><span> \n</span><span>    height</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;600&quot;</span><span> \n</span><span>    title</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;scatterplot with plotly&quot;</span><span> \n</span><span>    style</span><span class=\"token\" style=\"color:#393A34\">=</span><span class=\"token\" style=\"color:#A31515\">&quot;border:none&quot;</span><span class=\"token\" style=\"color:#393A34\">&gt;</span><span>\n</span><span></span><span class=\"token\" style=\"color:#393A34\">&lt;</span><span class=\"token\" style=\"color:#393A34\">/</span><span>iframe</span><span class=\"token\" style=\"color:#393A34\">&gt;</span></code></pre></div><div class=\"sc-kAyceB eLJVsY nteract-outputs\" style=\"max-height:100%\"><div class=\"cell_display\" style=\"max-height:100%;overflow-y:auto\"><div><iframe \n    src=\"../../interactiveCharts/scatterplot-plotly-trendline.html\" \n    width=\"800\" \n    height=\"600\" \n    title=\"scatterplot with plotly\" \n    style=\"border:none\">\n</iframe>\n</div></div></div></div><div class=\"sc-eqUAAy jevAiY cell\" style=\"box-shadow:none\"><div class=\"sc-jXbUNg gqRgKk markdown\"><h2>Going further</h2>\n<p>This article explains how to create an interactive scatter plot with <a href=\"https://python-graph-gallery.com/plotly/\">plotly</a> with various customization features, such as adding a categorical variable or a trendline.</p>\n<p>For more examples of <strong>how to create or customize</strong> your scatter plots with Python, see the <a href=\"https://python-graph-gallery.com/scatter-plot/\">scatter plot section</a>. You may also be interested in creating a <a href=\"https://python-graph-gallery.com/82-marginal-plot-with-seaborn/\">scatter plot with marginal distribution</a>.</p></div></div></div></div>","metadata":{"title":"Interactive scatterplot with Plotly","description":"This post describes how to create an <b>interactive scatterplot</b> with python using the <a href='https://python-graph-gallery.com/plotly/'>plotly</a> library.<br/>Interactivity on scatterplots is very handy: it allows to <b>zoom on a specific area</b> and have a <b>tooltip</b> for data point description.<br/> This tutorial starts with a simple example and then shows how to add features such as a level of <b>grouping</b> or a <b>trend line</b>.","seoDescription":"A tutorial explaining how to build an interactive scatterplot with plotly using the plotly library","family":"correlation","chartType":"scatter","keywords":"python, chart, scatter, plot, scatterplot, plotly, interactive, trendline","slug":"511-interactive-scatterplot-with-plotly"}}},"pageContext":{"id":"65f8f3c9-8e06-5f30-8731-86347f65794f >>> JupyterNotebook","slug":"511-interactive-scatterplot-with-plotly","__params":{"slug":"511-interactive-scatterplot-with-plotly"}}},"staticQueryHashes":["2944911273"],"slicesMap":{}}